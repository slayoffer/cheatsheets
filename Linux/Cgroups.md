### List cgroups

```bash
cd /sys/fs/cgroup
ls
# or specific
ls memory
```

Например, файл `user.slice/memory.max` содержит значение, задающее объём памяти, доступной приложениям, которые запускают пользователи.

Каталог `user.slice` содержит настройки для пользователей, в то время как `system.slice` управляет системными сервисами. Если мы хотим ограничить память одного конкретного процесса, нужно создать вложенную группу для этого процесса.

Теперь сменим пользователя на **root** и попробуем создать свой подкаталог:

```
sudo su
mkdir arseniy.slice 
```

Linux автоматически создаст кучу файлов с параметрами для настройки этой группы. Нужно лишь провалиться поглубже:

```
cd arseniy.slice
ls 
```

```
echo -n 100000 > memory.max
cat memory.max 
```

Получаем значение 98304 — это заданный нами лимит для этой контрольной группы, чуть меньше 100 килобайт.

Теперь попробуем ограничить текущую сессию консоли bash по памяти, добавив её в эту контрольную группу.

Сначала добудем PID консоли:

```
 echo $$ 
```

Самое время обменяться значениями PID. У Арсения, к примеру, получилось 2184.

Добавим этот процесс консоли в контрольную группу. Для этого запустим ещё одну сессию bash и в ней выполним:

```
 echo $$ > cgroup.procs 
```

А теперь ударим по `ls`:

```
ls 
```

И получим `Killed`. Бедному башу оказалось недостаточно 100 КБ, чтобы выполнить `ls`.