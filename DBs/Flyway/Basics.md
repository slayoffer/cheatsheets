Flyway написан на Java, выполняет скрипты миграции и запускается либо как самостоятельная программа, либо как часть Java приложения.

Поддерживает большое количество баз:

- Oracle
- SQL Server
- DB2
- MySQL
- PostgreSQL
- SQLite
- и др.

Основные команды:

- `migrate` — старт миграции, запустятся все скрипты миграции которые находятся в папке `migration`
- `clean` — запустятся скрипты очистки базы (которые надо самостоятельно прописать)
- `info` — даст информацию о статусе об уже прошедших миграциях и тех, что можно провести сейчас базируясь на таблице `flyway_schema_history`
- `validate` — запустится встроенная проверка на корректность синтаксиса SQL-скриптов

Миграционные скрипты подразделяются на типы:

- **Versioned Migrations** — основные скрипты миграции, в которых создаются таблицы, схемы, пользователи, вносятся тестовые данные. Начинаются с `V001__`.
- **Undo Migrations** — скрипты, предназначенные для отмены миграции. В них описывается, как будут удалены пользователи, таблицы базы и прочее. Начинаются с `U01__`.
- **Repeatable Migrations** — скрипты, предназначенные для повтора и выполняемые каждый раз при запуске приложения. Используются для выдачи прав пользователям, создание VIEW-шек, функций и много другого. Запускаются последними, после того как отработали скрипты миграции. Начинаются с `R__`, так как они повторяемые, и их порядок не должен быть жёстким. Следовательно, номера версий не указываются.

Названия скриптов в миграции имеют очень важное значение, поэтому необходим строгий синтаксис и версионирование, указанные в названии файла **V01__** или с **V1__**. Полный список можно посмотреть в [официальной документации](https://flywaydb.org/documentation/concepts/migrations.html).

Как это будет выглядеть на примере:

Скопировать код

```
.
└── db
    └── migration
        ├── V001__dw.sql
        ├── V002__datasource.sql
        ├── V003__product_installation.sql
        └── R__access.sql 
```

Классический пример миграционного скрипта, создающего схему и таблицу:

Скопировать кодSQL

```sql
CREATE SCHEMA dw;
CREATE TABLE dw.user (
    id int PRIMARY KEY,
    name VARCHAR(100)
); 
```
